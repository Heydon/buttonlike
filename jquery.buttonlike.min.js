/*!
* ButtonLike 1.1 (a jQuery plugin, obviously)
* Copyright 2013, Heydon Pickering: http://www.heydonworks.com
* Released under the WTFPL license - http://sam.zoy.org/wtfpl/
*/

(function($){$.fn.extend({buttonlike:function(options){var defaults={pressed:null,controls:null};var candidate=$(this);var actualbutton=candidate.is('button');var options=$.extend(defaults,options);return this.each(function(){var button;var wrappertags=['h1','h2','h3','h4','h5','h6','li','dt','dd'];var badtags=['ul','ol','dl','menu','table','tr'];if($.inArray(candidate.get(0).tagName.toLowerCase(),badtags)!==-1){console.log('buttonlike.js: You shouldn\'t make a button out of that <'+candidate.get(0).tagName.toLowerCase()+'>')}else{if(actualbutton){button=candidate;button.prop('type','button')}else{if($.inArray(candidate.get(0).tagName.toLowerCase(),wrappertags)!==-1){candidate.wrapInner('<span />');button=candidate.find('> span')}else{button=candidate}button.attr({'role':'button','tabindex':'0'})}if(options.controls){button.attr('aria-controls',options.controls)}if(null!==options.pressed){button.attr('aria-pressed',options.pressed)}button.focus(function(){button.on('keydown.button',function(e){if(e.keyCode==13||e.keyCode==32){if(actualbutton){button.one(function(){button.trigger('click')})}else{button.trigger('click')}}})});button.blur(function(){button.off('keydown.button')});button.on('click',function(){if(null!==options.pressed){(button.attr('aria-pressed')=='true')?button.attr('aria-pressed','false'):button.attr('aria-pressed','true')}})}})}})})(jQuery);